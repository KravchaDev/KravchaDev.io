function ALXErrorSendClass(){var t,e=ALXerrorSendMessages,n=ALXerrorLogoImgSrc,r={start:"",body:"",end:""};function o(t){return function(t){var e;return e=" "==t.substring(t.length-1,t.length)?" ":"",t.replace(/\s+$/,"")+e}(function(t){return(" "==t.substring(0,1)?" ":"")+t.replace(/^\s+/,"")}(t))}function a(){var t=window.location.href,e=t.indexOf("#");-1!=e&&(t.substr(e),t=t.substr(0,e));var n=t,a={AJAX_CALL:"Y",ERROR_SEND:"Y",ERROR_TEXT_START:o(r.start),ERROR_TEXT_BODY:document.getElementById("error_body").innerHTML,ERROR_TEXT_END:o(r.end),COMMENT:document.getElementById("error-comment").value,ERROR_URL:window.location.href};BX.ajax.post(n,a,(function(t){g.Close(),"OK!"!=t.replace(/(^\s+)|(\s+$)/g,"")?s.SetContent(i.replace("#ERROR#",t)):s.SetContent(d),s.Show()}))}var i='<div id="send-error"><table class="bx-width100">\t<tr>\t\t<td class="no-bootom-border" valign="top" style="padding-top:10px !important;">\t\t<img src="/bitrix/images/altasib.errorsend/altasib.errorsend.error.gif" style="float:left;margin-right:8px;" />\t\t</td>\t\t<td width="90%" class="no-bootom-border" style="padding-top:8px !important;">#ERROR#</td>\t</tr></table></div>',d='<div id="send-error"><table class="bx-width100">\t<tr>\t\t<td class="no-bootom-border" valign="top" style="padding-top:10px !important;">\t\t<img src="/bitrix/images/altasib.errorsend/altasib.errorsend.ok.gif" style="float:left;margin-right:8px" />\t\t</td>\t\t<td width="90%" class="no-bootom-border" style="padding-top:8px !important;"><span style="color:green;font-size:14px"><b>\t\t'+e.text_ok+'</b></span><span style="font-size:12px;color:#7d7d7d"><br /><br />'+e.text_ok2+"</span></td>\t</tr></table></div>",s=new BX.CDialog({title:e.TitleForm,content:d,resizable:!1,draggable:!0,height:"130",width:"350"});s.SetButtons([s.btnClose]),!/MSIE 6/i.test(navigator.userAgent)||/MSIE 7/i.test(navigator.userAgent)||/MSIE 8/i.test(navigator.userAgent)||(s.PARTS.CONTENT.className="a-dialog-center",s.PARTS.TITLEBAR.className="a-dialog-head",s.PARTS.TITLEBAR.style.width=parseInt(s.PARAMS.width)+25+"px",s.PARTS.FOOT.className="a-dialog-foot",s.PARTS.FOOT.style.width=parseInt(s.PARAMS.width)+25+"px",s.PARTS.TITLEBAR_ICONS.className="a-dialog-head-icons");var l='<div id="send-error">\t<img style="float:left;margin-right:15px;" src="'+n+'" /><br /><span style="font-size:16px;color:#143f6d">'+e.footer+'</span><br style="clear:both" /><br /><span style="font-size:13px;color:#000"><b>'+e.head+':</b></span>\t<div style="border:1px solid #d1d1d1;background-color:#fafafa;width:470px;padding:8px;margin:7px 0px 13px 0px;height:55px;color:#7d7d7d;font-size:12px;box-sizing:content-box;">\t<span id="error_start"></span><font color="red" id="error_body"></font><span id="error_end"></span>\t</div>\t<small style="color:#7d7d7d">'+e.comment+':</small>\t<div style="width:470px;height:55px;padding:8px;border:1px solid #4b4b4b;margin:3px 0px 3px 0px;box-sizing:content-box;"><textarea name="comment" id="error-comment" rows=3 cols=5 style="width:100%;border:0px;height:55px;padding:0px;min-height:55px;"></textarea></div></div>',g=new BX.CDialog({title:e.TitleForm,content:l,resizable:!1,draggable:!0,height:"300",width:"510"});!/MSIE 6/i.test(navigator.userAgent)||/MSIE 7/i.test(navigator.userAgent)||/MSIE 8/i.test(navigator.userAgent)||(g.PARTS.CONTENT.className="a-dialog-center",g.PARTS.TITLEBAR.className="a-dialog-head",g.PARTS.TITLEBAR.style.width=parseInt(g.PARAMS.width)+25+"px",g.PARTS.FOOT.className="a-dialog-foot",g.PARTS.FOOT.style.width=parseInt(g.PARAMS.width)+25+"px",g.PARTS.TITLEBAR_ICONS.className="a-dialog-head-icons"),g.SetButtons([new BX.CWindowButton({title:e.ButtonSend,id:"ok",name:"ok",action:function(){a()}}),g.btnCancel]),BX.bind(document,"keydown",(function(n){var o=window.event?window.event.keyCode:n.keyCode?n.keyCode:n.which?n.which:null,i=window.event?window.event.ctrlKey:n.ctrlKey;if(13==o&&i)return g.isOpen?a():!1!==function(){var n,o,a,i,d;if(window.getSelection?n=window.getSelection():document.getSelection?n=document.getSelection():document.selection&&(n=document.selection),n.getRangeAt&&(document.getSelection()?t=document.getSelection():window.getSelection()&&(t=window.getSelection()),t=t.toString(),(i=document.createRange()).setStartBefore(n.getRangeAt(0).startContainer),i.setEnd(n.getRangeAt(0).startContainer,n.getRangeAt(0).startOffset),d=i.toString(),(a=n.getRangeAt(0).cloneRange()).setStart(n.getRangeAt(0).endContainer,n.getRangeAt(0).endOffset),a.setEndAfter(n.getRangeAt(0).endContainer),o=a.toString(),d=d.substr(d.length-50,d.length),o=o.substr(0,50)),n.createRange&&(t=n.createRange().text,(i=n.createRange()).moveStart("character",-50),i.moveEnd("character",-t.length),d=i.text,(a=n.createRange()).moveStart("character",t.length),a.moveEnd("character",50),o=a.text,document.selection.empty()),!t.length)return!1;if(t.length>250){var s='<div id="send-error_LongText"><table class="bx-width100">\t<tr>\t\t<td class="no-bootom-border" valign="top" style="padding-top:10px !important;">\t\t\t<img src="/bitrix/images/altasib.errorsend/altasib.errorsend.error.gif" style="float:left;margin-right:8px" />\t\t</td>\t\t<td width="90%" class="no-bootom-border" style="padding-top:10px !important;"><font color="red"><b>'+e.LongText+"</b></font><br /><br />"+e.LongText2+"</td>\t</tr></table></div>",l=new BX.CDialog({title:e.TitleForm,content:s,resizable:!1,draggable:!0,height:"110",width:"300"});return!/MSIE 6/i.test(navigator.userAgent)||/MSIE 7/i.test(navigator.userAgent)||/MSIE 8/i.test(navigator.userAgent)||(l.PARTS.CONTENT.className="a-dialog-center",l.PARTS.TITLEBAR.className="a-dialog-head",l.PARTS.TITLEBAR.style.width=parseInt(l.PARAMS.width)+25+"px",l.PARTS.FOOT.className="a-dialog-foot",l.PARTS.FOOT.style.width=parseInt(l.PARAMS.width)+25+"px",l.PARTS.TITLEBAR_ICONS.className="a-dialog-head-icons"),l.SetButtons([l.btnClose]),l.Show(),!1}r.start=d,r.body=t,r.end=o}()&&(document.getElementById("error_start").innerHTML=r.start,document.getElementById("error_body").innerHTML=r.body,document.getElementById("error_end").innerHTML=r.end,g.Show()),!1}))}BX.ready((function(){"function"==typeof ALXErrorSendClass&&(ALXErrorSend=new ALXErrorSendClass)}));